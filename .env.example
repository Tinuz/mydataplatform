# Data Platform Environment Variables
# Copy this file to .env and customize for your environment

# ============================================
# KEYCLOAK CONFIGURATION
# ============================================
KC_HOSTNAME=localhost
KC_HOSTNAME_PORT=8085
KC_HTTP_ENABLED=true
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak Realm
KEYCLOAK_REALM=data-platform
KEYCLOAK_CLIENT_ID=dagster
KEYCLOAK_CLIENT_SECRET=dagster_client_secret_2025

# ============================================
# OAUTH2-PROXY CONFIGURATION
# ============================================
OAUTH2_PROXY_CLIENT_ID=dagster
OAUTH2_PROXY_CLIENT_SECRET=dagster_client_secret_2025
OAUTH2_PROXY_COOKIE_SECRET=eOWvPEmrVmW24wemknp83rAKWiE6PkVd  # Must be 32 bytes
OAUTH2_PROXY_REDIRECT_URL=http://localhost:4180/oauth2/callback
OAUTH2_PROXY_OIDC_ISSUER_URL=http://keycloak:8080/realms/data-platform

# ============================================
# POSTGRESQL CONFIGURATION
# ============================================
POSTGRES_USER=superset
POSTGRES_PASSWORD=superset
POSTGRES_DB=superset
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ============================================
# SUPERSET CONFIGURATION
# ============================================
SUPERSET_SECRET_KEY=YOUR_SUPERSET_SECRET_KEY_CHANGE_THIS
SUPERSET_ADMIN_USER=admin
SUPERSET_ADMIN_PASSWORD=admin
SUPERSET_ADMIN_EMAIL=admin@superset.com

# ============================================
# MINIO CONFIGURATION
# ============================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET=lake
MINIO_REGION=us-east-1

# ============================================
# DAGSTER CONFIGURATION
# ============================================
DAGSTER_HOME=/opt/dagster/dagster_home
DAGSTER_POSTGRES_USER=superset
DAGSTER_POSTGRES_PASSWORD=superset
DAGSTER_POSTGRES_DB=superset
DAGSTER_POSTGRES_HOST=postgres
DAGSTER_POSTGRES_PORT=5432

# GCS Integration (optional)
GCS_CREDENTIALS_PATH=/opt/dagster/gcs-credentials.json

# ============================================
# KONG CONFIGURATION
# ============================================
KONG_DATABASE=postgres
KONG_PG_HOST=postgres_konga
KONG_PG_PORT=5432
KONG_PG_USER=postgres
KONG_PG_PASSWORD=postgres
KONG_PG_DATABASE=konga

# ============================================
# KONGA CONFIGURATION
# ============================================
KONGA_DB_URI=postgresql://postgres:postgres@postgres_konga:5432/konga
KONGA_NODE_ENV=production

# ============================================
# MARQUEZ CONFIGURATION
# ============================================
MARQUEZ_PORT=5000
MARQUEZ_ADMIN_PORT=5001
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=marquez
POSTGRES_USER=superset
POSTGRES_PASSWORD=superset

# ============================================
# INVESTIGATIONS API CONFIGURATION
# ============================================
INVESTIGATIONS_API_PORT=8090
DATABASE_URL=postgresql://superset:superset@postgres:5432/superset

# ============================================
# CELL TOWER API CONFIGURATION
# ============================================
CELL_API_PORT=3100
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=superset
POSTGRES_PASSWORD=superset
POSTGRES_DATABASE=superset

# ============================================
# KAFKA CONFIGURATION (streaming profile)
# ============================================
KAFKA_BROKER=kafka:9092
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181

# ============================================
# ICEBERG REST CATALOG (streaming profile)
# ============================================
ICEBERG_REST_PORT=8181
CATALOG_WAREHOUSE=s3://lake/
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_REGION=us-east-1
S3_ENDPOINT=http://minio:9000

# ============================================
# AMUNDSEN CONFIGURATION (amundsen profile)
# ============================================
NEO4J_AUTH=neo4j/test
NEO4J_HEAP_SIZE=512m
ELASTICSEARCH_HEAP_SIZE=512m

# ============================================
# DOCKER RESOURCE LIMITS
# ============================================
POSTGRES_MEMORY_LIMIT=1g
SUPERSET_MEMORY_LIMIT=2g
DAGSTER_MEMORY_LIMIT=2g
MARQUEZ_MEMORY_LIMIT=1g
KEYCLOAK_MEMORY_LIMIT=1g
KONG_MEMORY_LIMIT=512m
MINIO_MEMORY_LIMIT=1g

# ============================================
# DEVELOPMENT FLAGS
# ============================================
DEBUG=false
LOG_LEVEL=info
ENABLE_METRICS=true
ENABLE_TRACING=false

# ============================================
# SECURITY SETTINGS (Production)
# ============================================
# For production deployments:
# 1. Change all default passwords
# 2. Generate new secret keys:
#    - SUPERSET_SECRET_KEY: openssl rand -base64 42
#    - OAUTH2_PROXY_COOKIE_SECRET: python3 -c "import secrets; print(secrets.token_urlsafe(32)[:32])"
# 3. Use HTTPS for all external endpoints
# 4. Set OAUTH2_PROXY_INSECURE_OIDC_ALLOW_UNVERIFIED_EMAIL=false
# 5. Set OAUTH2_PROXY_INSECURE_OIDC_SKIP_ISSUER_VERIFICATION=false
# 6. Configure proper KC_HOSTNAME for Keycloak
# 7. Enable SSL/TLS for PostgreSQL connections
# 8. Use proper secret management (HashiCorp Vault, AWS Secrets Manager, etc.)
