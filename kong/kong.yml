_format_version: "3.0"
_transform: true

services:
  - name: cell-towers-svc
    url: http://cell-api:3000
    routes:
      - name: api-prefix
        paths: ["/api"]
        strip_path: true
      # Swagger redirect-doel: /docs/ (en ook /docs)
      - name: docs-root
        paths: ["/docs", "/docs/"]
        strip_path: false

      # OpenAPI direct op root
      - name: spec-root
        paths: ["/openapi.yaml"]
        strip_path: false
        
plugins:
  # Basic CORS (client-friendly)
  - name: cors
    config:
      origins: ["*"]
      methods: ["GET", "OPTIONS"]
      headers: ["*"]
      exposed_headers: ["*"]
      credentials: false
      max_age: 3600

  # Rate limit per IP (lekker safe defaults)
  - name: rate-limiting
    config:
      minute: 600
      policy: local
